{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3>Book a Facility</h3>
            <a href="{{ url_for('my_bookings') }}" class="btn btn-outline-dark">View My History</a>
        </div>

        <div class="card shadow">
            <div class="card-header bg-dark text-white">
                <h4 class="mb-0">New Reservation Request</h4>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label class="form-label fw-bold">Select Venue</label>
                        <select name="facility_id" class="form-select" required>
                            <option value="" selected disabled>-- Choose a Room --</option>
                            {% for fac in facilities %}
                            <option value="{{ fac.id }}">{{ fac.name }} (Capacity: {{ fac.capacity }})</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">Start Time</label>
                            <input type="datetime-local" name="start_time" class="form-control" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">End Time</label>
                            <input type="datetime-local" name="end_time" class="form-control" required>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Purpose of Activity</label>
                        <input type="text" name="purpose" class="form-control" required placeholder="e.g. CS101 Final Exam">
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success btn-lg">Submit Request</button>
                        <a href="{{ url_for('my_bookings') }}" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </div>

    </div>
</div>

{% if error %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        Swal.fire({
            icon: 'error',
            title: 'Booking Failed',
            text: '{{ error }}'
        });
    });
</script>
{% endif %}
{% endblock %}